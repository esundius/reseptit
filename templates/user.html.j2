{% extends "base.html.j2" %}
{% block title %}User {{ username }}{% endblock %}
{% block head %}
  {{ super() }}
  <style>
  </style>
{% endblock %}
{% block menu %}
  {{ super() }}
{% endblock %}
{% block flash %}
  {{ super() }}
{% endblock %}
{% block body %}
  <h1>User {{ username }}</h1>

  {% if user_reviews %}
    {% if username == session.username %}
      <h2>Your 10 last reviews</h2>
    {% else %}
      <h2>The 10 last reviews by {{ username }}</h2>
    {% endif %}
  {% endif %}
  {% for review in user_reviews %}
    <div class="review">
      <h3>Review for <a href="/recipe/{{ review.recipe_id }}">{{ review.recipe_name }}</a></h3>
      <p>
        Added at {{ review.created }}
      </p>
      {% if review.modified %}
        <p>
          (Updated at {{ review.modified }})
        </p>
      {% endif %}
      <p>
        Rating: {{ review.rating }} / 5
      </p>
      <p>
        {{ review.comment | show_lines }}
      </p>
    </div>
  {% endfor %}

  {% if recipes | count == 0 %}
    {% if username == session.username %}
      <p>You have not added any recipes yet.</p>
    {% else %}
      <p>This user has not added any recipes yet.</p>
    {% endif %}
  {% else %}
    {% if username == session.username %}
      <h2>Recipes added by you</h2>
    {% else %}
      <h2>Recipes added by {{ username }}</h2>
    {% endif %}
    <p>
      A total of {{ recipe_count }} recipes. 
    </p>
    {% block list_recipes scoped %}
      {{ super() }}
    {% endblock %}
    <div class="pagination">
    <p>
      {% if page > 1 %}
        <a href="/user/{{ username }}/{{ page - 1 }}">&lt; Previous</a>
      {% endif %}
      Page {{ page }} of {{ page_count }}
      {% if page < page_count %}
        <a href="/user/{{ username }}/{{ page + 1 }}">Next &gt;</a>
      {% endif %}
    </p>
    </div>
  {% endif %}
{% endblock %}